<!doctype html>
<html>
	<head>
		<link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.3/themes/smoothness/jquery-ui.css" />
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
		<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.3/jquery-ui.min.js"></script>
		<style>
			#myCanvas {
				float:left;
				border:1px solid gray;
			}
		</style>
		<script>
			var Turtle = {
				canvas: null,
				context: null,
				x: 0,
				y: 0,
				angle: 0,
				begin: function(canvas) {
					this.canvas = canvas;
					this.context = this.canvas.getContext('2d');
					this.context.beginPath();
					this.context.lineWidth = 1;
					this.context.strokeStyle = 'black';
				},
				end: function() {
					this.context.stroke();
				},
				moveTo: function(x, y) {
					this.x = x;
					this.y = y;
					this.context.moveTo(this.x, this.y);
				},
				forward: function(distance) {
					this.x += Math.cos(this.angle) * distance;
					this.y -= Math.sin(this.angle) * distance;
					this.context.lineTo(this.x, this.y);
				},
				left: function(angle) {
					this.angle += angle * Math.PI / 180;
				},
				right: function(angle) {
					this.angle -= angle * Math.PI / 180;
				}
			};

			var CanvasApp = {
				render: function() {
					this.canvas = document.getElementById('myCanvas');
					this.context = this.canvas.getContext('2d');

					this.clearCanvas();

					sideLength = this.canvas.width * 0.8;

					x = (this.canvas.width - sideLength) / 2;
					y = this.canvas.height * 0.27;

					Turtle.begin(this.canvas);
					Turtle.moveTo(x, y);
					this.kochLine(sideLength, 6);
					Turtle.right(120);
					this.kochLine(sideLength, 6);
					Turtle.right(120);
					this.kochLine(sideLength, 6);
					Turtle.end();
				},
				kochLine: function(distance, level) {
					distance /= 3.0;
					level = level - 1;

					level ? this.kochLine(distance, level) : Turtle.forward(distance);
					Turtle.left(60);
					level ? this.kochLine(distance, level) : Turtle.forward(distance);
					Turtle.right(120);
					level ? this.kochLine(distance, level) : Turtle.forward(distance);
					Turtle.left(60);
					level ? this.kochLine(distance, level) : Turtle.forward(distance);
				},
				clearCanvas: function() {
					this.context.beginPath();
					this.context.rect(0, 0, this.canvas.width, this.canvas.height);
					this.context.fillStyle = 'white';
					this.context.fill();
				}
			};

			$(function(){
				CanvasApp.render();
			});
		</script>
	</head>
	<body>
		<canvas id="myCanvas" width="1024" height="1024"></canvas>
	</body>
</html>